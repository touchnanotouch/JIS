<!-- Header -->

<header class="sidebar-header">
    <div class="sidebar-header-wrapper">
        <a href="{{ url_for('dashboard') }}" class="logo-link">
            <div class="logo-badge">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="7" fill="#f3f4f6" stroke="#e5e7eb" stroke-width=".8"/>
                    <path stroke="#dc2626" stroke-width="1.2" stroke-linecap="round" d="m22 22 8.256 8.256"/>
                    <circle cx="30.256" cy="30.256" r="1.8" fill="#dc2626"/>
                    <circle cx="9.744" cy="30.256" r="1.8" fill="#2563eb"/>
                    <circle cx="9.744" cy="9.744" r="1.8" fill="#10b981"/>
                    <path stroke="#8b5cf6" stroke-width="1.2" stroke-linecap="round" stroke-dasharray="2,2" d="m22 18 8.256-8.256"/>
                    <circle cx="30.256" cy="9.744" r="1.8" fill="#8b5cf6"/>
                    <circle cx="20" cy="20" r="4" fill="#1f2937"/>
                </svg>
            </div>
            <div class="logo-text">
                <span>JIS</span>
            </div>
        </a>

        <!-- TODO: Изменить title при сворачивании -->
        <button class="sidebar-toggle" title="Свернуть боковую панель">
            <i class="fas fa-chevron-left toggle-icon"></i>
        </button>
    </div>
</header>

<!-- Nav -->

<nav class="sidebar-nav">
    <ul class="sidebar-nav-list">
        <!-- Main Panel -->

        <li class="sidebar-nav-item {% if request.endpoint == 'dashboard' %}active{% endif %}">
            <a href="{{ url_for('dashboard') }}" class="sidebar-nav-link" title="Главная панель">
                <i class="fas fa-home sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Главная панель</span>
            </a>
        </li>

        <!-- Vacancies -->

        <li class="sidebar-nav-divider">
            <span class="sidebar-nav-divider-text">Вакансии</span>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'favorites' %}active{% endif %}">
            <a href="{{ url_for('favorites') }}" class="sidebar-nav-link" title="Избранное">
                <i class="fas fa-star sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Избранное</span>
            </a>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'job_search' %}active{% endif %}">
            <a href="{{ url_for('search') }}" class="sidebar-nav-link" title="Поиск">
                <i class="fas fa-search sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Поиск</span>
            </a>
        </li>

        <!-- Responses -->

        <li class="sidebar-nav-divider">
            <span class="sidebar-nav-divider-text">Отклики</span>
        </li>
        
        <li class="sidebar-nav-item {% if request.endpoint == 'responses' %}active{% endif %}">
            <a href="{{ url_for('responses') }}" class="sidebar-nav-link" title="История откликов">
                <i class="fas fa-paper-plane sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">История откликов</span>
            </a>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'templates' %}active{% endif %}">
            <a href="{{ url_for('templates') }}" class="sidebar-nav-link">
                <i class="fas fa-file-alt sidebar-nav-icon" title="Шаблоны откликов"></i>
                <span class="sidebar-nav-text">Шаблоны откликов</span>
            </a>
        </li>

        <!-- Responses (auto) -->

        <li class="sidebar-nav-item {% if request.endpoint == 'auto_responses' %}active{% endif %}">
            <a href="{{ url_for('auto_responses') }}" class="sidebar-nav-link" title="Авто-отклики">
                <i class="fas fa-robot sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Авто-отклики</span>
            </a>
        </li>

        <!-- Analytics -->

        <li class="sidebar-nav-divider">
            <span class="sidebar-nav-divider-text">Аналитика</span>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'statistics' %}active{% endif %}">
            <a href="{{ url_for('statistics') }}" class="sidebar-nav-link" title="Статистика">
                <i class="fas fa-bar-chart sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Статистика</span>
            </a>
        </li>

        <!-- System -->

        <li class="sidebar-nav-divider">
            <span class="sidebar-nav-divider-text">Система</span>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'sources' %}active{% endif %}">
            <a href="{{ url_for('sources') }}" class="sidebar-nav-link" title="Источники">
                <i class="fas fa-database sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Источники</span>
            </a>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'parser' %}active{% endif %}">
            <a href="{{ url_for('parser') }}" class="sidebar-nav-link" title="Парсер">
                <i class="fas fa-code sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Парсер</span>
            </a>
        </li>

        <li class="sidebar-nav-item {% if request.endpoint == 'notifications' %}active{% endif %}">
            <a href="{{ url_for('notifications') }}" class="sidebar-nav-link" title="Уведомления">
                <i class="fas fa-bell sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Уведомления</span>
            </a>
        </li>
    </ul>
</nav>

<!-- Footer -->

<footer class="sidebar-footer">
    <div class="sidebar-footer-wrapper">
        <div class="profile-info">
            <div class="profile-avatar">
                <i class="fas fa-question"></i>
            </div>
            <div class="profile-details">
                <span class="profile-name">
                    {{ current_user.full_name if current_user else 'Гость' }}
                </span>
                <span class="profile-email">
                    {{ current_user.email if current_user else 'Войдите в аккаунт' }}
                </span>
            </div>
        </div>

        <div class="profile-actions">
            <!-- Account -->

            <a href="{{ url_for('settings') }}" class="profile-action" title="Настройки">
                <i class="fas fa-cog"></i>
            </a>
            {% if current_user %}
            <a href="{{ url_for('logout') }}" class="profile-action" title="Выйти">
                <i class="fas fa-sign-out"></i>
            </a>
            {% else %}
            <a href="{{ url_for('login') }}" class="profile-action" title="Войти">
                <i class="fas fa-sign-in"></i>
            </a>
            {% endif %}
        </div>
    </div>
</footer>
