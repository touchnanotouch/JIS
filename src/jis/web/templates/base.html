<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0">

    <!-- Title -->

    <title>{% block title %}JIS{% endblock %}</title>

    <!-- Main CSS Loader -->

    <link rel="stylesheet" href="/static/css/loader.css">

    <!-- Font Awesome (for icons) -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<body>
    <!-- App Container -->

    <div class="app-container">
        <!-- Sidebar -->

        <aside class="sidebar">
            <div class="sidebar-wrapper">
                {% include "components/sidebar.html" %}
            </div>
        </aside>
        
        <!-- Main Content -->
        
        <main class="main">
            <!-- Page Block -->

            <div class="page-wrapper">
                <!-- Page Header -->

                <header class="page-header">
                    <h1 class="page-title">{% block pageTitle %}{% endblock %}</h1>

                </header>

                <!-- Page Content -->

                <div class="page-content">{% block pageContent %}{% endblock %}</div>
            </div>
        </main>

        <!-- Footer Block -->

        <footer class="footer">
            <div class="footer-wrapper">
                {% include "components/footer.html" %}
            </div>
        </footer>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.querySelector('.sidebar-wrapper');
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const toggleIcon = document.querySelector('.toggle-icon');
            

            const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            if (isCollapsed) {
                sidebar.classList.add('collapsed');
                updateToggleIcon(true);
            }
            

            sidebarToggle.addEventListener('click', function() {
                const isNowCollapsed = sidebar.classList.toggle('collapsed');
                
                localStorage.setItem('sidebarCollapsed', isNowCollapsed);
                

                updateToggleIcon(isNowCollapsed);
            });
            
            function updateToggleIcon(isCollapsed) {
                if (toggleIcon) {
                    if (isCollapsed) {
                        toggleIcon.classList.remove('fa-chevron-left');
                        toggleIcon.classList.add('fa-chevron-right');
                    } else {
                        toggleIcon.classList.remove('fa-chevron-right');
                        toggleIcon.classList.add('fa-chevron-left');
                    }
                }
            }
        });
    </script>
</body>
</html>
